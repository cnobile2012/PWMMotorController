Version 4
SHEET 1 1736 680
WIRE 576 -112 -160 -112
WIRE 768 -96 736 -96
WIRE 896 -96 896 -128
WIRE 896 -96 848 -96
WIRE 960 -96 896 -96
WIRE 896 -64 896 -96
WIRE 960 -64 960 -96
WIRE 128 -48 112 -48
WIRE 208 -48 192 -48
WIRE 432 -48 432 -64
WIRE 736 -48 736 -96
WIRE 304 -32 256 -32
WIRE 400 -32 304 -32
WIRE -352 -16 -352 -32
WIRE -272 -16 -352 -16
WIRE 544 -16 464 -16
WIRE -448 0 -448 -32
WIRE -352 0 -352 -16
WIRE -272 0 -272 -16
WIRE 384 0 336 0
WIRE 400 0 384 0
WIRE 624 0 624 -16
WIRE 576 16 576 -112
WIRE 592 16 576 16
WIRE -80 32 -80 16
WIRE 288 32 288 16
WIRE 672 32 656 32
WIRE 688 32 672 32
WIRE 896 32 896 0
WIRE 960 32 960 0
WIRE 960 32 896 32
WIRE 992 32 960 32
WIRE -208 48 -224 48
WIRE -160 48 -160 -112
WIRE -160 48 -208 48
WIRE -112 48 -160 48
WIRE 160 48 160 32
WIRE 384 48 384 0
WIRE 448 48 384 48
WIRE 544 48 544 -16
WIRE 544 48 528 48
WIRE 592 48 544 48
WIRE -16 64 -16 32
WIRE -16 64 -48 64
WIRE 16 64 -16 64
WIRE 112 64 112 -48
WIRE 112 64 96 64
WIRE 128 64 112 64
WIRE 896 64 896 32
WIRE -112 80 -128 80
WIRE -16 80 -16 64
WIRE 32 80 -16 80
WIRE 208 80 208 -48
WIRE 208 80 192 80
WIRE 256 80 256 -32
WIRE 256 80 208 80
WIRE -16 96 -16 80
WIRE 128 96 112 96
WIRE 208 96 208 80
WIRE -208 112 -208 48
WIRE 672 112 672 32
WIRE 736 112 736 48
WIRE 752 112 736 112
WIRE 288 128 288 112
WIRE 336 128 336 0
WIRE 336 128 288 128
WIRE 32 144 32 80
WIRE 256 144 256 80
WIRE 288 144 288 128
WIRE 736 144 736 112
WIRE 384 160 384 48
WIRE -128 208 -128 80
WIRE -16 208 -16 176
WIRE -16 208 -128 208
WIRE 208 208 208 176
WIRE 208 208 -16 208
WIRE -160 224 -160 48
WIRE 112 224 112 96
WIRE 112 224 -160 224
WIRE -448 240 -448 80
WIRE -352 240 -352 80
WIRE -352 240 -448 240
WIRE -272 240 -272 80
WIRE -272 240 -352 240
WIRE -208 240 -208 176
WIRE -208 240 -272 240
WIRE -80 240 -80 96
WIRE -80 240 -208 240
WIRE 160 240 160 112
WIRE 160 240 -80 240
WIRE 288 240 288 224
WIRE 288 240 160 240
WIRE 384 240 384 224
WIRE 384 240 288 240
WIRE 432 240 432 16
WIRE 432 240 384 240
WIRE 624 240 624 64
WIRE 624 240 432 240
WIRE 736 240 736 224
WIRE 736 240 624 240
WIRE 896 240 896 208
WIRE 896 240 736 240
WIRE -352 256 -352 240
FLAG -352 256 0
FLAG -352 -32 +V1
FLAG -80 16 +V1
FLAG 160 32 +V1
FLAG -16 32 SqWave
FLAG 304 -32 TriWave
FLAG 432 -64 +V1
FLAG 624 -16 +V1
FLAG 672 112 PWM-Out
FLAG 336 0 Vm
FLAG 992 32 Motor-CTL
FLAG 896 -128 +V2
FLAG -448 -32 +V2
FLAG 288 16 +V1
SYMBOL voltage -352 -16 R0
WINDOW 0 -35 7 Left 2
WINDOW 3 -77 102 Left 2
SYMATTR InstName V1
SYMATTR Value +15V
SYMBOL potentiometer -288 -16 R0
WINDOW 0 25 86 Left 2
WINDOW 3 -49 -14 Left 1
SYMATTR InstName R1
SYMATTR Value Rtot=20K wiper=.48
SYMBOL OpAmps\\opamp2 -80 0 R0
WINDOW 0 -26 63 Left 1
WINDOW 3 24 78 VRight 1
SYMATTR InstName U1-A
SYMATTR Value LM358
SYMBOL OpAmps\\opamp2 160 16 R0
WINDOW 0 -27 64 Left 1
WINDOW 3 19 86 VRight 1
SYMATTR InstName U1-B
SYMATTR Value LM358
SYMBOL potentiometer -32 80 R0
WINDOW 0 27 94 Left 2
WINDOW 3 -52 178 Left 1
SYMATTR InstName R2
SYMATTR Value Rtot=100K wiper=0.389
SYMBOL res 112 48 R90
WINDOW 0 -26 51 VBottom 2
WINDOW 3 -27 50 VTop 2
SYMATTR InstName R3
SYMATTR Value 20K
SYMBOL cap 192 -64 R90
WINDOW 0 45 3 VBottom 2
WINDOW 3 -28 29 VTop 2
SYMATTR InstName C1
SYMATTR Value 0.01µf
SYMBOL potentiometer 192 80 R0
WINDOW 0 27 92 Left 2
WINDOW 3 -53 178 Left 1
SYMATTR InstName R4
SYMATTR Value Rtot=100K wiper=0.36
SYMBOL OpAmps\\opamp2 432 -80 R0
WINDOW 0 -25 64 Left 1
WINDOW 3 22 46 Left 1
SYMATTR InstName U2-A
SYMATTR Value LM358
SYMBOL OpAmps\\opamp2 624 -32 R0
WINDOW 0 -26 63 Left 1
WINDOW 3 -54 105 Left 1
SYMATTR InstName U2-B
SYMATTR Value LM358
SYMBOL voltage 512 272 R0
WINDOW 0 -33 7 Left 2
WINDOW 3 13 93 Left 1
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE(7.16 7.16 119.0)
SYMBOL res 272 128 R0
WINDOW 0 24 48 Left 1
WINDOW 3 37 71 VRight 1
SYMATTR InstName R5
SYMATTR Value 67K
SYMBOL res 544 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 2.2Meg
SYMBOL cap -224 112 R0
WINDOW 3 -40 50 Left 1
SYMATTR Value 0.01µf
SYMATTR InstName C2
SYMBOL cap 368 160 R0
WINDOW 0 27 49 Left 2
WINDOW 3 28 -26 VRight 1
SYMATTR InstName C3
SYMATTR Value 1µf
SYMBOL TIP120 768 64 R0
WINDOW 0 100 84 Left 2
WINDOW 3 118 107 Center 0
SYMATTR InstName Q2
SYMBOL load 880 -64 R0
WINDOW 0 32 -11 Left 2
WINDOW 3 28 68 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 -47 32 Left 2
SYMATTR InstName I1
SYMATTR Value 3A
SYMATTR SpiceLine load
SYMBOL diode 976 0 R180
WINDOW 0 -28 75 Left 2
WINDOW 3 -30 116 Left 2
SYMATTR InstName D1
SYMATTR Value 1N4004
SYMBOL res 864 -112 R90
WINDOW 0 7 100 VBottom 2
WINDOW 3 -21 18 VTop 2
SYMATTR InstName R7
SYMATTR Value 1.2K
SYMBOL voltage -448 -16 R0
WINDOW 0 -35 7 Left 2
WINDOW 3 -77 102 Left 2
SYMATTR InstName V2
SYMATTR Value +7.4V
SYMBOL nmos 688 -48 R0
SYMATTR InstName Q1
SYMATTR Value 2N7002
SYMBOL res 720 128 R0
SYMATTR InstName R8
SYMATTR Value 10K
SYMBOL res 272 16 R0
WINDOW 0 23 16 Left 1
WINDOW 3 39 64 VRight 1
SYMATTR InstName R9
SYMATTR Value 32.3K
TEXT -160 -136 Left 2 !.inc standard.dio
TEXT -160 -160 Left 2 !.lib potentiometer_standard.lib
TEXT 232 -136 Left 2 !.tran 300ms startup
TEXT -160 -184 Left 2 !.lib Opamp5.lib
TEXT -256 440 Left 2 ;fo = R2/(4*R3*C1*R4)
TEXT -256 280 Left 2 ;R1 -- Adjust zero crossing of triangle wave.
TEXT -256 312 Left 2 ;R2 -- Adjust amplitude of the triangle wave.
TEXT -256 376 Left 2 ;R4 -- Adjust frequence of the square and triangle waves.
TEXT -256 344 Left 2 ;R3 -- Determines the frequence window.
TEXT -256 408 Left 2 ;C3 -- 0.01uf For Vm test, 10uf for operation (Causes delay in motor start).
TEXT 232 -160 Left 2 ;8.3ms When testing Vm one cycle.
TEXT -48 56 Left 0 ;1
TEXT -120 40 Left 0 ;2
TEXT -120 72 Left 0 ;3
TEXT -88 32 Left 0 ;8
TEXT -88 96 Left 0 ;4
TEXT 120 56 Left 0 ;6
TEXT 120 88 Left 0 ;5
TEXT 192 72 Left 0 ;7
TEXT 464 -8 Left 0 ;1
TEXT 424 -48 Left 0 ;8
TEXT 424 16 Left 0 ;4
TEXT 392 -40 Left 0 ;2
TEXT 392 -8 Left 0 ;3
TEXT 584 8 Left 0 ;6
TEXT 584 40 Left 0 ;5
TEXT 656 24 Left 0 ;7
